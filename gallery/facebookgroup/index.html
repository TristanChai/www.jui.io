<!DOCTYPE HTML>
<html>
<head>
	<META charset="UTF-8">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1">

	<link rel="stylesheet" href="../../lib/jui/css/ui.min.css"/>
	<link rel="stylesheet" href="../../lib/jui/css/ui-jennifer.min.css"/>
	<link rel="stylesheet" href="../../lib/jui/css/grid.min.css"/>
	<link rel="stylesheet" href="../../lib/jui/css/grid-jennifer.min.css"/>
	<script type="text/javascript" src="../../lib/jquery-1.8.0.min.js"></script>
	<script type="text/javascript" src="../../lib/jui/js/core.min.js"></script>
	<script type="text/javascript" src="../../lib/jui/js/ui.min.js"></script>
	<script type="text/javascript" src="../../lib/jui/js/grid.min.js"></script>
	<script type="text/javascript" src="../../lib/jui/js/chart.min.js"></script>

	<link rel="stylesheet" href="/gallery/facebookgroup/index.css"/>

</head>
<body class="jui">
<div class="row">
	<div class="col left">
		<div class="panel">
			<div class="head">
				<strong>Network</strong>
			</div>
			<div class="body">
				<div id="network"></div>
			</div>
		</div>
	</div>
	<div class="right">
		<div class="row">
			<div class="panel">
				<div class="head">
					<strong>Statistics</strong>
				</div>
				<div class="body">
					<div id="statistics"></div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col left">
				<div class="panel">
					<div class="head">
						<strong>Status</strong>
					</div>
					<div class="body">
						<div id="status"></div>
					</div>
				</div>
			</div>
			<div class="right">
				<div class="row">
					<div class="panel">
						<div class="head">
							<strong>Time Overview</strong>
						</div>
						<div class="body">
							<div id="time_overview"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	var groups;
	var network;

	function windowResize() {
		var container = $('.jui');
		var $panel = $(".panel > .body");

		$(container).height(740);
	}

	$(function () {
		groups = getJSON('group')
		network = getJSON('network')

		chart("#network", {
			height: 670,
			icon: {
				type: "jennifer",
				path: "/gallery/facebookgroup//icon/icomoon.ttf"
			},
			theme: "jennifer",
			padding: 5,
			axis: {
				c: {
					type: "topologytable",
					sort: "random"
				},
				data: network
			},
			brush: {
				type: "topologynode",
				colors: ["black"],
				nodeText: function (data) {
					var len = data.outgoing.length;

					if (len > 20) {
						return "{server}";
					}

					return "";
				},
				nodeTitle: function (data) {
					return data.name;
				},
				nodeScale: function (data) {
					var len = data.outgoing.length;

					if (len > 50) {
						return 1.75;
					} else if (len > 30) {
						return 1.5;
					} else if (len > 10) {
						return 1;
					}

					return 0.5;
				}
			},
			widget: {
				type: "topologyctrl"
			},
			style: {
				//topologyNodeRadius: 8,
				//topologyNodeFontSize: 10
			}
		});
	});


	var chart = jui.include("chart.builder");


	function getJSON(name) {
		return JSON.parse($.ajax({
			url: "/gallery/facebookgroup/data/" + name + ".json",
			async: false
		}).responseText);
	}
</script>

</body>
</html>
