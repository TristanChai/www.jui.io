<!DOCTYPE HTML>
<html>
<head>
<title>JENNIFER UI: AdminTool Sample</title>
<link rel="stylesheet" href="/lib/jui/css/ui.min.css"/>
<link id="ui_theme" rel="stylesheet" href="/lib/jui/css/ui-jennifer.min.css"/>
<link rel="stylesheet" href="/lib/jui/css/grid.min.css"/>
<link id="grid_theme" rel="stylesheet" href="/lib/jui/css/grid-jennifer.min.css"/>
<script src="/lib/jquery-1.8.0.min.js"></script>
<script src="/lib/jui/js/core.min.js"></script>
<script src="/lib/jui/js/ui.min.js"></script>
<script src="/lib/jui/js/grid.min.js"></script>
<script src="/lib/jui/js/chart.min.js"></script>
<link href="/gallery/accountbook/index.css" rel="stylesheet" type="text/css" />

<script>
function getDefaultData(count) {
	var data = [];

	for(var i = 0; i < count; i++) {
		data.push({
			date: "",
			memo: "",
			cash: "",
			card: "",
			type: "",
			income: ""
		});
	}

	return data;
}

function printStartToEndDate(month) {
	var _ = jui.include("util.base");

	var now = new Date(),
		start = new Date(now.getFullYear(), month || now.getMonth(), 1),
		end = new Date(start.getFullYear(), start.getMonth() + 1, 1);

	start.setDate(1);
	end = new Date(end.getTime() - 1);

	$(".header .start-date").html(_.dateFormat(start, "yyyy.MM.dd"));
	$(".header .end-date").html(_.dateFormat(end, "yyyy.MM.dd"));
}

jui.ready([ "chart.builder", "grid.table", "ui.tab", "ui.datepicker", "ui.slider" ],
	function(builder, table, tab, datepicker, slider) {

	var month = new Date().getMonth();

	// To display this month
	printStartToEndDate(month);

	slider("#slider", {
		type: "single",
		from: month + 1,
		min: 1,
		max: 12,
		step: 1,
		tooltip: false,
		event: {
			change: function(d) {
				printStartToEndDate(d.from - 1);
			}
		}
	});

	tab("#tab", {
		event: {
			change: function(data) {
				if(data.index == 0) {
					$("#tab_1").show();
					$("#tab_2").hide();
					$("#tab_3").hide();
				} else if(data.index == 1) {
					$("#tab_1").hide();
					$("#tab_2").show();
					$("#tab_3").hide();
				} else {
					$("#tab_1").hide();
					$("#tab_2").hide();
					$("#tab_3").show();
				}
			}
		}
	});

	table("#table_outgoing", {
		fields: [ null, "date", "memo", "cash", "card", "type" ],
		resize: true,
		colshow: true,
		scroll: true,
		scrollHeight: 240,
		sort: [ 1, 2, 3, 4, 5 ],
		data : getDefaultData(11)
	});

	table("#table_income", {
		fields: [ null, "date", "memo", "income", "type" ],
		resize: true,
		colshow: true,
		sort: [ 1, 2, 3, 4 ],
		data : getDefaultData(26)
	});

	builder("#chart", {
		width : "100%",
		height : 300,
		padding : {
			top : 25,
			right : 25,
			bottom: 25
		},
		axis : [{
			x : {
				type : "block",
				domain : [ "식비", "주거/통신", "생활용품", "의복/미용", "건강/문화", "교육/육아", "교통/차량", "경조사/회비", "세금/이자", "용돈/기타", "미분류" ],
			},
			y : {
				type : "range",
				domain : [ 0, 100 ],
				step : 5,
				line : "solid"
			}
		}],
		brush : [{
			type : "column"
		}],
		style : {
			gridXAxisBorderWidth : 1,
			gridYAxisBorderWidth : 0,
			gridTickBorderSize : 0,
			gridTickPadding : 7
		}
	});

	datepicker("#datepicker", {
		format: "yyyy-MM-dd",
		event: {
			select: function(date, e) {
				alert(date);
			}
		},
		tpl: {
			date: $("#tpl_date").html()
		}
	});
});
</script>
</head>
<body class="jui">

<div class="header">
	<div class="center">
		<div class="title">
			<span class="start-date"></span> - <span class="end-date"></span>
		</div>

		<div id="slider" class="slider horizontal" style="width: 250px;"></div>

		<div class="slider-scale">
			<span>1</span>
			<span>2</span>
			<span>3</span>
			<span>4</span>
			<span>5</span>
			<span>6</span>
			<span>7</span>
			<span>8</span>
			<span>9</span>
			<span>10</span>
			<span>11</span>
			<span>12</span>
		</div>
	</div>

	<ul id="tab" class="tab top">
		<li><a href="#">지출</a></li>
		<li><a href="#">수입</a></li>
		<li><a href="#">달력</a></li>
	</ul>

	<div class="toolbar">
		<div class="group">
			<a class="btn mini"><i class="icon-table"></i></a>
			<a class="btn mini"><i class="icon-tool"></i></a>
			<a class="btn mini"><i class="icon-printer"></i></a>
		</div>
		<a class="btn mini">항목추가</a>
	</div>
</div>

<div class="contents">
	<div id="tab_1">
		<div id="chart"></div>

		<table id="table_outgoing" class="table simple headline small stripeless" style="margin-top: 15px;">
			<thead>
			<tr>
				<th width="15"><input type="checkbox" /></th>
				<th>날짜</th>
				<th>사용내역</th>
				<th>현금</th>
				<th>카드</th>
				<th>분류</th>
			</tr>
			</thead>
			<tbody></tbody>
		</table>

		<script data-jui="#table_outgoing" data-tpl="row" type="text/template">
			<tr>
				<td><input type="checkbox" /></td>
				<td><!= date !></td>
				<td><!= memo !></td>
				<td><!= cash !></td>
				<td><!= card !></td>
				<td><!= type !></td>
			</tr>
		</script>
	</div>
	<div id="tab_2" style="display: none;">
		<table id="table_income" class="table simple headline small stripeless" style="margin-top: 15px;">
			<thead>
			<tr>
				<th width="15"><input type="checkbox" /></th>
				<th>날짜</th>
				<th>내역</th>
				<th>금액</th>
				<th>분류</th>
			</tr>
			</thead>
			<tbody></tbody>
		</table>

		<script data-jui="#table_income" data-tpl="row" type="text/template">
			<tr>
				<td><input type="checkbox" /></td>
				<td><!= date !></td>
				<td><!= memo !></td>
				<td><!= income !></td>
				<td><!= type !></td>
			</tr>
		</script>
	</div>
	<div id="tab_3" style="display: none;">
		<div id="datepicker" class="calendar" style="height: 580px; padding-top: 0px;">
			<table class="body">
				<tr>
					<th>SUN</th><th>MON</th><th>TUE</th><th>WED</th><th>THU</th><th>FRI</th><th>SAT</th>
				</tr>
			</table>
		</div>

		<script id="tpl_date" type="text/template">
			<td>
				<! if(type != "none") { !>
				<! if(day == 0) { !>
				<span style="color: red;"><!= date !></span>
				<! } else if(day == 6) { !>
				<span style="color: blue;"><!= date !></span>
				<! } else { !>
				<span><!= date !></span>
				<! } !>
				<! } !>
			</td>
		</script>
	</div>
</div>


</body>
</html>
